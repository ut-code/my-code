---
id: ruby-testing-3
title: 2. テストファイルの作成
level: 3
---

### 2\. テストファイルの作成

Rubyの規約では、テストファイルは `test_` プレフィックス（例: `test_calculator.rb`）または `_test.rb` サフィックス（例: `calculator_test.rb`）で作成するのが一般的です。ここでは `test_calculator.rb` を作成します。

テストファイルは、以下の要素で構成されます。

1.  `require 'minitest/autorun'`
      * Minitestライブラリを読み込み、ファイル実行時にテストが自動で走るようにします。
2.  `require_relative 'ファイル名'`
      * テスト対象のファイル（今回は `calculator.rb`）を読み込みます。
3.  `class クラス名 < Minitest::Test`
      * テストクラスを定義し、`Minitest::Test` を継承します。
4.  `def test_メソッド名`
      * `test_` で始まるメソッドを定義します。これが個々のテストケースとなります。

```ruby:test_calculator.rb
require 'minitest/autorun'
require_relative 'calculator'

class CalculatorTest < Minitest::Test
  # `test_` で始まるメソッドがテストとして実行される
  def test_addition
    # テスト対象のインスタンスを作成
    calc = Calculator.new
    
    # 期待値 (Expected)
    expected = 5
    # 実際の結果 (Actual)
    actual = calc.add(2, 3)

    # アサーション（後述）
    # 期待値と実際の結果が等しいことを検証する
    assert_equal(expected, actual)
  end

  def test_subtraction
    calc = Calculator.new
    # アサーションは1行で書くことが多い
    assert_equal(1, calc.subtract(4, 3))
  end
end
```

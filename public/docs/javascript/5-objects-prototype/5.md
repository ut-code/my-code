---
id: javascript-objects-prototype-5
title: プロトタイプチェーンによる継承の仕組み
level: 2
---

## プロトタイプチェーンによる継承の仕組み

あるオブジェクトのプロパティにアクセスした際、JavaScriptは以下の順序で探索を行います。

1.  そのオブジェクト自身（Own Property）が持っているか？
2.  持っていなければ、そのオブジェクトのプロトタイプが持っているか？
3.  それでもなければ、プロトタイプのプロトタイプが持っているか？
4.  `null` に到達するまで繰り返し、見つからなければ `undefined` を返す。

この連鎖を**プロトタイプチェーン**と呼びます。クラス継承のように型定義をコピーするのではなく、**リンクを辿って委譲（Delegation）する**仕組みです。

以下のコードで、具体的な動作を確認してみましょう。

```js:prototype_chain.js
const animal = {
    eats: true,
    walk() {
        console.log("Animal walks");
    }
};

const rabbit = {
    jumps: true,
    __proto__: animal // 注意: __proto__への代入は学習目的以外では非推奨
};

const longEar = {
    earLength: 10,
    __proto__: rabbit
};

// 1. longEar自身は walk を持っていない -> rabbitを見る
// 2. rabbitも walk を持っていない -> animalを見る
// 3. animal が walk を持っている -> 実行
longEar.walk(); 

// 自身のプロパティ
console.log(`Jumps? ${longEar.jumps}`); // rabbitから取得
console.log(`Eats? ${longEar.eats}`);   // animalから取得

// プロパティの追加（シャドーイング）
// longEar自身に walk を追加すると、animalの walk は隠蔽される
longEar.walk = function() {
    console.log("LongEar walks simply");
};

longEar.walk();
```

```js-exec:prototype_chain.js
Animal walks
Jumps? true
Eats? true
LongEar walks simply
```

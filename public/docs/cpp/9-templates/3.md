---
id: cpp-templates-3
title: クラステンプレートの仕組み
level: 3
---

### クラステンプレートの仕組み

関数テンプレートと基本的な考え方は同じですが、いくつか重要な違いがあります。

1.  **明示的な型指定**:
    関数テンプレートではコンパイラが型を推論してくれましたが、クラステンプレートの場合は、オブジェクトを生成する際に`Pair<int, std::string>`のように、開発者が明示的に型を指定する必要があります。

2.  **インスタンス化**:
    `Pair<int, std::string>`のように具体的な型を指定してオブジェクトを作ることを、テンプレートの**インスタンス化**と呼びます。コンパイラは、この指定に基づいて`T1`を`int`に、`T2`を`std::string`に置き換えた、以下のような新しいクラスを内部的に生成します。

    ```cpp
    // コンパイラが内部的に生成するクラスのイメージ
    class Pair_int_string { // クラス名は実際には異なります
    public:
        int first;
        std::string second;

        Pair_int_string(int f, std::string s) : first(f), second(s) {}

        void print() {
            std::cout << "(" << first << ", " << second << ")" << std::endl;
        }
    };
    ```

    `Pair<int, std::string>`と`Pair<std::string, double>`は、コンパイルされると全く別のクラスとして扱われることに注意してください。

クラステンプレートは、C++の強力なライブラリである**STL (Standard Template Library)**の根幹をなす技術です。次章で学ぶ`vector`や`map`といった便利なコンテナは、すべてクラステンプレートで実装されています。

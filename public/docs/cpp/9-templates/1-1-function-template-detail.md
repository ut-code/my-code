---
id: cpp-templates-function-template-detail
title: テンプレートの仕組み
level: 3
---

### テンプレートの仕組み

`template <typename T>`という部分が、この関数がテンプレートであることを示しています。

  * **`template <...>`**: テンプレートの宣言を開始します。
  * **`typename T`**: `T`という名前の「型引数」を定義しています。`typename`の代わりに`class`と書くこともできますが、意味は同じです。`T`は、このテンプレートが実際に使われるときに具体的な型（`int`や`double`など）に置き換えられます。

`main`関数で`max_value(10, 20)`のように呼び出すと、コンパイラは引数の型が`int`であることから、`T`を`int`だと自動的に判断します（これを**テンプレート引数推論**と呼びます）。そして、内部的に以下のような`int`版の関数を生成してくれるのです。

```cpp
// コンパイラが内部的に生成するコードのイメージ
int max_value(int a, int b) {
    return (a > b) ? a : b;
}
```

同様に、`double`や`std::string`で呼び出されれば、それぞれの型に対応したバージョンの関数が自動的に生成されます。これにより、私たちは一つの「設計図」を書くだけで、様々な型に対応できるのです。

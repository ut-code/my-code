---
id: python-generators-decorators-4
title: 基本的な作り方
level: 3
---

### 基本的な作り方

デコレータの基本的な構造は、関数を入れ子にすることです。

1.  外側の関数（デコレータ関数）は、装飾したい対象の関数を引数として受け取ります。
2.  内側の関数（ラッパー関数）で、受け取った関数を呼び出す前後に、追加したい処理を記述します。
3.  外側の関数は、この内側の関数を返します。

関数の実行前後にメッセージを表示する簡単なデコレータを見てみましょう。

```python-repl:4
>>> def my_decorator(func):
...     def wrapper():
...         print("--- 処理を開始します ---")
...         func()
...         print("--- 処理が完了しました ---")
...     return wrapper
...

>>> def say_hello():
...     print("こんにちは！")
...

# デコレートされた新しい関数を作成
>>> decorated_hello = my_decorator(say_hello)
>>> decorated_hello()
--- 処理を開始します ---
こんにちは！
--- 処理が完了しました ---
```

この書き方をより簡単にするための構文が `@`（アットマーク）、シンタックスシュガーです。

```python-repl:5
>>> @my_decorator
... def say_goodbye():
...     print("さようなら！")
...

>>> say_goodbye()
--- 処理を開始します ---
さようなら！
--- 処理が完了しました ---
```

`@my_decorator` は、`say_goodbye = my_decorator(say_goodbye)` と同じ意味になります。こちらのほうが直感的で、Pythonのコードで広く使われています。

ジェネレータとデコレータは、最初は少し複雑に感じるかもしれませんが、使いこなせばよりクリーンで効率的なPythonコードを書くための強力な武器となります。ぜひ積極的に活用してみてください。

はい、承知いたしました。先に作成したチュートリアルの末尾に追加する「この章のまとめ」と「練習問題」を作成します。

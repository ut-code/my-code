---
id: python-generators-decorators-2
title: ジェネレータ式
level: 2
---

## ジェネレータ式

リスト内包表記に似た構文で、より簡潔にジェネレータを作成する方法が**ジェネレータ式**です。リスト内包表記の `[]` を `()` に変えるだけで作れます。

リスト内包表記はリストオブジェクトを生成するため、要素数が多いとメモリを大量に消費します。一方、ジェネレータ式はジェネレータオブジェクトを返すため、遅延評価（必要になるまで計算しない）が行われ、メモリ使用量を抑えられます。

```python-repl:3
# リスト内包表記
>>> list_comp = [i * 2 for i in range(5)]
>>> list_comp
[0, 2, 4, 6, 8]
>>> type(list_comp)
<class 'list'>

# ジェネレータ式
>>> gen_exp = (i * 2 for i in range(5))
>>> gen_exp
<generator object <genexpr> at 0x...>
>>> type(gen_exp)
<class 'generator'>

>>> next(gen_exp)
0
>>> next(gen_exp)
2
>>> list(gen_exp) # 残りの要素をリストに変換
[4, 6, 8]
```

巨大なファイルの各行を処理する場合など、ジェネレータ式は非常に有効です。

---
id: python-exceptions-3-elsefinally
title: elseとfinally節の役割
level: 2
---

## `else`と`finally`節の役割

`try...except` ブロックには、`else` と `finally` という2つのオプションの節を追加できます。

  * **`else` 節**: `try` ブロックで**例外が発生しなかった場合**にのみ実行されます。
  * **`finally` 節**: 例外の有無に**関わらず、必ず最後に**実行されます。ファイルクローズやデータベース接続の切断など、後片付け処理に最適です。

すべての節を使った例を見てみましょう。

```python-repl:6
>>> def divider(a, b):
...   print(f"--- {a} / {b} の計算を開始します ---")
...   try:
...     result = a / b
...   except ZeroDivisionError:
...     print("エラー: 0による除算です。")
...   else:
...     # 例外が発生しなかった場合に実行
...     print(f"計算成功！ 結果: {result}")
...   finally:
...     # 常に最後に実行
...     print("--- 計算を終了します ---")
...
>>> # 成功するケース
>>> divider(10, 2)
--- 10 / 2 の計算を開始します ---
計算成功！ 結果: 5.0
--- 計算を終了します ---

>>> # 例外が発生するケース
>>> divider(10, 0)
--- 10 / 0 の計算を開始します ---
エラー: 0による除算です。
--- 計算を終了します ---
```

この例から、実行フローが明確にわかります。

  * 成功ケースでは `try` -\> `else` -\> `finally` の順に実行されます。
  * 失敗ケースでは `try` -\> `except` -\> `finally` の順に実行されます。

`finally` 節は、`try` ブロック内で `return` が実行される場合でも、その `return` の直前に実行されることが保証されています。これにより、リソースの解放漏れなどを防ぐことができます。

---
id: rust-collections-strings-2
title: 要素へのアクセス
level: 3
---

### 要素へのアクセス

要素へのアクセスには「インデックス記法 `[]`」と「`get` メソッド」の2通りの方法があります。安全性において大きな違いがあります。

  * `&v[i]`: 存在しないインデックスにアクセスすると**パニック**を起こします。
  * `v.get(i)`: `Option<&T>` を返します。範囲外の場合は `None` になるため、安全に処理できます。

<!-- end list -->

```rust:vector_access.rs
fn main() {
    let v = vec![10, 20, 30, 40, 50];

    // 方法1: インデックス（確実に存在するとわかっている場合に使用）
    let third: &i32 = &v[2];
    println!("3番目の要素は {}", third);

    // 方法2: getメソッド（範囲外の可能性がある場合に使用）
    match v.get(100) {
        Some(third) => println!("101番目の要素は {}", third),
        None => println!("101番目の要素はありません"),
    }

    // イテレーション
    // &v とすることで所有権を移動させずに参照でループする
    print!("要素: ");
    for i in &v {
        print!("{} ", i);
    }
    println!();
    
    // 値を変更しながらイテレーション
    let mut v_mut = vec![1, 2, 3];
    for i in &mut v_mut {
        *i += 50; // 参照外し演算子(*)を使って値を書き換える
    }
    println!("変更後: {:?}", v_mut);
}
```

```rust-exec:vector_access.rs
3番目の要素は 30
101番目の要素はありません
要素: 10 20 30 40 50 
変更後: [51, 52, 53]
```

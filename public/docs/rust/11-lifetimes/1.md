---
id: rust-lifetimes-1
title: ダングリング参照を防ぐ
level: 3
---

### ダングリング参照を防ぐ

ライフタイムの主な目的は、無効なデータを指す参照を作らせないことです。

以下のコードを見てください（これはコンパイルエラーになります）。

```rust
{
    let r;                // ---------+-- rのライフタイム
                          //          |
    {                     //          |
        let x = 5;        // -+-- xのライフタイム
        r = &x;           //  |       |
    }                     // -+       |
                          //          |
    println!("r: {}", r); //          |
}                         // ---------+
```

ここで、`r` は `x` を参照しようとしています。しかし、内側のブロック `{}` が終わった時点で `x` は破棄されます。その後に `r` を使おうとすると、`r` は「解放されたメモリ」を指していることになります。

Rustのコンパイラ（**借用チェッカー**）は、このスコープのズレを検知し、「`x` の寿命が短すぎる」としてエラーを出します。

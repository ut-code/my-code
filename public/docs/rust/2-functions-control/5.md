---
id: rust-functions-control-5
title: ループ構造
level: 3
---

### ループ構造

Rustには3種類のループがあります。

1.  `loop`: 無限ループ
2.  `while`: 条件付きループ
3.  `for`: コレクションや範囲に対するループ

#### loop と値の戻り

`loop` キーワードは、明示的に `break` するまで永遠に繰り返します。面白い機能として、`break` の後に値を置くことで、ループ全体の結果としてその値を返すことができます。

```rust:loop_return.rs
fn main() {
    let mut counter = 0;

    // ループの結果を変数resultに代入
    let result = loop {
        counter += 1;

        if counter == 10 {
            // カウンタが10になったら、counter * 2 の値を返して終了
            break counter * 2;
        }
    };

    println!("ループの結果: {}", result);
}
```

```rust-exec:loop_return.rs
ループの結果: 20
```

#### while

`while` は他の言語とほぼ同じです。条件が真である限り実行されます。

```rust
// 例（実行不要）
let mut number = 3;
while number != 0 {
    println!("{}!", number);
    number -= 1;
}
```

#### for ループ

Rustで最も安全かつ頻繁に使用されるのが `for` ループです。配列の要素を走査したり、特定の回数だけ処理を行ったりする場合、インデックス管理が不要な `for` が推奨されます。

数値の範囲を指定する場合は `Range` 型（`start..end`）を使用します。

```rust:for_loop.rs
fn main() {
    let a = [10, 20, 30, 40, 50];

    // 配列のイテレータを使ったループ
    println!("--- 配列の走査 ---");
    for element in a.iter() {
        println!("値: {}", element);
    }

    // Rangeを使ったループ (1から3まで。4は含まない)
    println!("--- 範囲指定 ---");
    for number in 1..4 {
        println!("カウント: {}", number);
    }
}
```

```rust-exec:for_loop.rs
--- 配列の走査 ---
値: 10
値: 20
値: 30
値: 40
値: 50
--- 範囲指定 ---
カウント: 1
カウント: 2
カウント: 3
```

---
id: rust-ownership-9
title: 所有権と関数
level: 2
---

## 所有権と関数

関数に変数を渡す動作も、代入と同様に機能します。つまり、**関数へ値を渡すと所有権が移動します**（Copy型を除く）。

```rust:function_ownership.rs
fn main() {
    let s = String::from("hello");  // s がスコープに入る

    takes_ownership(s);             // s の値が関数にムーブされる
                                    // ここで s はもう有効ではない！

    let x = 5;                      // x がスコープに入る
    makes_copy(x);                  // x も関数に移動するが、
                                    // i32はCopyトレイトを持つので、
                                    // この後も x を使って問題ない

} // ここで x がスコープアウト。s もスコープアウトだが、
  // 所有権は既に移動しているので何も起きない。

fn takes_ownership(some_string: String) { // some_string に所有権が移る
    println!("{}", some_string);
} // ここで some_string がスコープアウトし、`drop` が呼ばれる。メモリ解放。

fn makes_copy(some_integer: i32) { // some_integer に値がコピーされる
    println!("{}", some_integer);
} // ここで some_integer がスコープアウト。何も起きない。
```

```rust-exec:function_ownership.rs
hello
5
```

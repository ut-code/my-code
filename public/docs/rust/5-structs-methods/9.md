---
id: rust-structs-methods-9
title: メソッドの定義
level: 3
---

### メソッドの定義

メソッドは、最初の引数が必ず `self` （自分自身のインスタンス）になる関数です。

  * `&self`: データを読み取るだけ（借用・不変）。最も一般的。
  * `&mut self`: データを書き換える（借用・可変）。
  * `self`: 所有権を奪う（ムーブ）。メソッド呼び出し後に元の変数は使えなくなる。変換処理などで使う。

<!-- end list -->

```rust:rectangle.rs
#[derive(Debug)] // print!で{:?}を使ってデバッグ表示するために必要
struct Rectangle {
    width: u32,
    height: u32,
}

// Rectangle型に関連する関数やメソッドを定義
impl Rectangle {
    // メソッド：面積を計算する（読み取りのみなので &self）
    fn area(&self) -> u32 {
        self.width * self.height
    }

    // メソッド：他の四角形を含めるか判定する
    fn can_hold(&self, other: &Rectangle) -> bool {
        self.width > other.width && self.height > other.height
    }
}

fn main() {
    let rect1 = Rectangle { width: 30, height: 50 };
    let rect2 = Rectangle { width: 10, height: 40 };

    // メソッド呼び出し（自動参照外し機能により、rect1.area() と書ける）
    println!("The area of the rectangle is {} pixels.", rect1.area());

    if rect1.can_hold(&rect2) {
        println!("rect1 can hold rect2");
    }
}
```

```rust-exec:rectangle.rs
The area of the rectangle is 1500 pixels.
rect1 can hold rect2
```
